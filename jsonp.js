window.JSONP=window.JSONP||{};(function(){let i=0;window.JSONP.fetch=function(url){return new Promise(function(res,rej){try{const id="jsonp_cb_"+(++i);const sep=url.indexOf("?")>-1?"&":"?";const s=document.createElement("script");const t=setTimeout(()=>{cleanup();rej(new Error("JSONP timeout"));},12000);function cleanup(){try{delete window[id];s.remove();}catch(_){}}window[id]=function(d){clearTimeout(t);cleanup();res(d)};s.src=url+sep+"callback="+id;s.async=true;s.onerror=function(){clearTimeout(t);cleanup();rej(new Error("JSONP error"));};document.head.appendChild(s);}catch(e){rej(e)}})}})();